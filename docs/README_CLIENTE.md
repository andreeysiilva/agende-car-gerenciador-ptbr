
# AgendiCar - Dashboard do Cliente

## Vis√£o Geral

O Dashboard do Cliente √© a interface principal para empresas de lavagem automotiva gerenciarem seus neg√≥cios atrav√©s da plataforma AgendiCar. Cada empresa acessa seu dashboard atrav√©s de um subdom√≠nio personalizado (ex: robson.agendicar.com).

## Funcionalidades Principais

### 1. Autentica√ß√£o
- **Login via Email**: Empresas fazem login com email cadastrado pelo admin
- **Senha Tempor√°ria**: C√≥digo de 6 d√≠gitos enviado via Telegram API
- **Primeiro Acesso**: Obrigat√≥rio redefinir senha no primeiro login
- **Login Demo**: Usu√°rio `demonstracao` com senha `demo1234` para demonstra√ß√£o

### 2. Dashboard Principal (`/cliente`)
- Vis√£o geral dos agendamentos do dia
- Estat√≠sticas de faturamento mensal
- N√∫mero de clientes atendidos
- Servi√ßos mais populares
- A√ß√µes r√°pidas para principais funcionalidades

### 3. Agenda (`/cliente/agenda`) - **ATUALIZADA**
- **Visualiza√ß√£o Semanal e Mensal**: Navega√ß√£o entre semanas e meses
- **Integra√ß√£o com Hor√°rios**: Respeita hor√°rios de funcionamento configurados
- **Filtro de Servi√ßos**: Sele√ß√£o m√∫ltipla com filtros din√¢micos
- **Filtro de Equipes**: Dropdown para visualizar agendamentos por equipe
- **Agendamentos com Equipes**: Visualiza√ß√£o da equipe respons√°vel
- **Novo Agendamento**: Bot√£o funcional para criar agendamentos
- **Formul√°rio Completo**: 
  - Nome do cliente (obrigat√≥rio)
  - Telefone (obrigat√≥rio) 
  - Email (opcional)
  - Nome do carro (obrigat√≥rio) - Ex: "Fiat Uno", "Hilux"
  - Servi√ßo selecionado (obrigat√≥rio)
  - Data e hor√°rio (obrigat√≥rios)
  - Equipe respons√°vel (opcional)
  - Observa√ß√µes (opcional)
- **Edi√ß√£o e Exclus√£o**: Interface completa para gerenciar agendamentos
- **Visualiza√ß√£o Di√°ria**: Clique em dia para ver todos os agendamentos
- **Status de Funcionamento**: Dias fechados s√£o marcados visualmente
- **Navega√ß√£o de Datas**: Anterior/pr√≥ximo per√≠odo
- **Resumo do Per√≠odo**: Agendados, confirmados, pendentes

### 4. Servi√ßos (`/cliente/servicos`)
- **Cadastro Completo**: Nome, dura√ß√£o, pre√ßo, descri√ß√£o
- **Gest√£o de Status**: Ativar/desativar servi√ßos
- **Estat√≠sticas**: Pre√ßo m√©dio, dura√ß√£o m√©dia
- **Edi√ß√£o e Exclus√£o**: Interface completa de CRUD

### 5. Estat√≠sticas (`/cliente/estatisticas`)
- **Filtros Funcionais**:
  - Esta Semana
  - Este M√™s  
  - Trimestre
  - Este Ano
- **M√©tricas Principais**:
  - Faturamento total com percentual de crescimento
  - N√∫mero de clientes atendidos
  - Ticket m√©dio
  - Total de agendamentos
- **Gr√°ficos Interativos**:
  - Faturamento por per√≠odo (linha)
  - Servi√ßos mais vendidos (pizza)
  - Agendamentos por dia da semana (barras)
- **Dados Din√¢micos**: Atualizados conforme filtro selecionado

### 6. Clientes (`/cliente/clientes`) - **FUNCIONAL**
- **Lista Completa**: Nome, telefone, email, endere√ßo, hist√≥rico
- **Busca e Filtros**: Sistema de busca avan√ßado
- **Estat√≠sticas**: Total, ativos, agendamentos
- **Novo Cliente**: Bot√£o funcional para adicionar clientes
- **Formul√°rio Completo**:
  - Nome completo (obrigat√≥rio)
  - Telefone (obrigat√≥rio)
  - Email (opcional)
  - Endere√ßo (opcional)
  - Observa√ß√µes (opcional)
- **Ver Detalhes**: Modal com informa√ß√µes completas
- **Editar Cliente**: Funcionalidade completa de edi√ß√£o
- **Novo Agendamento**: Criar agendamento com dados pr√©-preenchidos

### 7. Conta (`/cliente/conta`) - **IMPLEMENTADA**
Sistema completo de configura√ß√µes da empresa organizado em abas:

#### 7.1 Hor√°rio de Funcionamento - **FUNCIONAL**
- **Configura√ß√£o por Dia**: Define hor√°rios de abertura e fechamento
- **Dias Ativos**: Liga/desliga funcionamento por dia da semana
- **Integra√ß√£o com Agenda**: Limita hor√°rios dispon√≠veis para agendamento
- **Valida√ß√£o**: Hor√°rios s√£o respeitados na cria√ß√£o de agendamentos

#### 7.2 Agendas e Atendentes - **MULTI-EQUIPES**
- **M√∫ltiplas Equipes**: Cria√ß√£o de equipes por especialidade
- **Nomes Personalizados**: Ex: "Equipe A - Lavagem R√°pida", "Equipe B - Detalhamento"
- **Status Ativo/Inativo**: Controle de visibilidade na agenda
- **Filtro na Agenda**: Dropdown para selecionar equipe espec√≠fica
- **Atribui√ß√£o**: Agendamentos podem ser atribu√≠dos a equipes espec√≠ficas

#### 7.3 Dados da Empresa
- **Informa√ß√µes B√°sicas**:
  - Nome da empresa
  - Endere√ßo f√≠sico completo
  - Telefone de contato
  - Link externo (WhatsApp, Instagram, etc.)
- **Upload de Logo**: Sistema de upload de logotipo (preparado)

#### 7.4 Notifica√ß√µes
- **Telegram**:
  - Alertas de novos agendamentos/cancelamentos
  - Resumo di√°rio da agenda (08:00)
- **WhatsApp**: Preparado para integra√ß√£o futura (desabilitado)
- **Configura√ß√µes Granulares**: Liga/desliga por tipo de notifica√ß√£o

#### 7.5 Seguran√ßa
- **Troca de Senha**: 
  - Valida√ß√£o de senha atual
  - Confirma√ß√£o de nova senha
  - Integra√ß√£o com Supabase Auth

## Novos Recursos Implementados

### üÜï Gest√£o Completa de Agendamentos
- **Criar**: Formul√°rio completo com valida√ß√£o
- **Editar**: Modificar todos os dados do agendamento
- **Excluir**: Exclus√£o com confirma√ß√£o
- **Status**: Gerenciamento de status (confirmado, pendente, conclu√≠do, cancelado)
- **Equipes**: Atribui√ß√£o e visualiza√ß√£o de equipes respons√°veis

### üÜï Gest√£o Completa de Clientes
- **Cadastro**: Formul√°rio completo para novos clientes
- **Edi√ß√£o**: Modifica√ß√£o de dados existentes
- **Detalhes**: Visualiza√ß√£o completa com hist√≥rico
- **Integra√ß√£o**: Cria√ß√£o de agendamentos com dados pr√©-preenchidos

### üÜï Integra√ß√£o Hor√°rios x Agenda
- **Dias Fechados**: N√£o permite agendamentos em dias n√£o funcionais
- **Hor√°rios Limitados**: Respeita hor√°rios de abertura e fechamento
- **Indica√ß√£o Visual**: Dias fechados s√£o claramente marcados
- **Valida√ß√£o**: Sistema impede agendamentos fora do hor√°rio

### üÜï Sistema Multi-Equipes
- **Cria√ß√£o**: Adicionar m√∫ltiplas equipes/atendentes
- **Filtragem**: Visualizar agendamentos por equipe espec√≠fica
- **Atribui√ß√£o**: Definir equipe respons√°vel por cada agendamento
- **Organiza√ß√£o**: Melhor distribui√ß√£o de trabalho

## Arquitetura T√©cnica

### Estrutura de Pastas Atualizada
```
src/
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ ClienteDashboard.tsx    # Dashboard principal
‚îÇ   ‚îú‚îÄ‚îÄ ClienteAgenda.tsx       # Gest√£o completa de agenda
‚îÇ   ‚îú‚îÄ‚îÄ ClienteServicos.tsx     # Cat√°logo de servi√ßos
‚îÇ   ‚îú‚îÄ‚îÄ ClienteEstatisticas.tsx # Relat√≥rios e gr√°ficos
‚îÇ   ‚îú‚îÄ‚îÄ ClienteClientes.tsx     # Gest√£o completa de clientes
‚îÇ   ‚îî‚îÄ‚îÄ ClienteConta.tsx        # Configura√ß√µes da empresa
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ layout/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ClientLayout.tsx    # Layout base do cliente
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ClientSidebar.tsx   # Menu lateral responsivo
‚îÇ   ‚îú‚îÄ‚îÄ agenda/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WeekView.tsx        # Visualiza√ß√£o semanal integrada
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MonthView.tsx       # Visualiza√ß√£o mensal
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ServiceFilter.tsx   # Filtro de servi√ßos
‚îÇ   ‚îî‚îÄ‚îÄ forms/                  # **NOVOS COMPONENTES**
‚îÇ       ‚îú‚îÄ‚îÄ NovoAgendamentoForm.tsx    # Formul√°rio de agendamento
‚îÇ       ‚îú‚îÄ‚îÄ EditarAgendamentoForm.tsx  # Edi√ß√£o de agendamento
‚îÇ       ‚îî‚îÄ‚îÄ ClienteForm.tsx            # Formul√°rio de cliente
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ README_CLIENTE.md       # Esta documenta√ß√£o
```

### Banco de Dados Multi-Tenant - **ATUALIZADO**

#### Tabelas Principais
- `empresas`: Dados das empresas clientes
- `usuarios`: Usu√°rios por empresa
- `agendamentos`: Agendamentos com equipe_id e cliente_id
- `servicos`: Servi√ßos oferecidos por empresa
- `horarios_funcionamento`: Hor√°rios por empresa e dia da semana
- `equipes`: **NOVA** - Equipes/atendentes por empresa
- `clientes`: **NOVA** - Base de clientes por empresa
- `transacoes`: Transa√ß√µes financeiras

#### Seguran√ßa RLS (Row Level Security)
- Pol√≠ticas por `empresa_id` em todas as tabelas
- Isolamento completo entre empresas
- Acesso baseado em `auth.uid()`
- **Novas pol√≠ticas** para equipes e clientes

### Rotas do Cliente
- `/cliente/login` - Tela de login
- `/cliente` - Dashboard principal  
- `/cliente/agenda` - **Agenda funcional completa**
- `/cliente/servicos` - Gest√£o de servi√ßos
- `/cliente/estatisticas` - Relat√≥rios e gr√°ficos
- `/cliente/clientes` - **Gest√£o completa de clientes**
- `/cliente/conta` - **Configura√ß√µes funcionais da empresa**

## Como Usar as Novas Funcionalidades

### 1. Configurar Hor√°rios de Funcionamento
1. Acesse `/cliente/conta`
2. V√° para aba "Hor√°rios de Funcionamento"
3. Para cada dia da semana:
   - Marque "Funcionando" para dias ativos
   - Defina hor√°rio de abertura (ex: 08:00)
   - Defina hor√°rio de fechamento (ex: 18:00)
4. Clique "Salvar Hor√°rios"
5. **A agenda automaticamente respeitar√° essas configura√ß√µes**

### 2. Criar Equipes/Atendentes
1. Na aba "Agendas e Atendentes", digite o nome da nova equipe
2. Exemplos: "Equipe A - Lavagem", "Jo√£o - Detalhamento", "Turno Manh√£"
3. Clique "Adicionar Equipe"
4. Use o toggle para ativar/desativar equipes
5. **Na agenda, use o filtro para ver agendamentos por equipe**

### 3. Gerenciar Agendamentos
1. **Criar Novo**:
   - Clique "Novo Agendamento" na p√°gina de agenda
   - Preencha todos os dados obrigat√≥rios
   - Selecione equipe respons√°vel (opcional)
   - Salve o agendamento

2. **Editar Existente**:
   - Clique em qualquer agendamento na agenda
   - Modifique os dados necess√°rios
   - Altere status se necess√°rio
   - Salve as altera√ß√µes

3. **Visualizar Dia**:
   - Clique em qualquer data na agenda
   - Veja todos os agendamentos do dia
   - Crie novos diretamente da visualiza√ß√£o di√°ria

### 4. Gerenciar Clientes
1. **Adicionar Cliente**:
   - Clique "Novo Cliente" na p√°gina de clientes
   - Preencha nome e telefone (obrigat√≥rios)
   - Adicione informa√ß√µes extras (email, endere√ßo, observa√ß√µes)

2. **Ver Detalhes**:
   - Clique "Ver Detalhes" em qualquer cliente
   - Visualize hist√≥rico completo
   - Use "Editar" para modificar dados
   - Use "Novo Agendamento" para agendar servi√ßo

3. **Buscar Clientes**:
   - Use a barra de busca para encontrar por nome, telefone ou email
   - Visualize estat√≠sticas na parte superior

## Integra√ß√µes e APIs

### Supabase (Backend Funcional)
- **Autentica√ß√£o**: Row Level Security (RLS) implementado
- **Database**: Estrutura multi-tenant com `empresa_id`
- **Pol√≠ticas**: Isolamento completo por empresa
- **Real-time**: Preparado para atualiza√ß√µes em tempo real
- **Storage**: Upload de arquivos preparado

### Estrutura de Dados
```sql
-- Exemplo de estrutura dos agendamentos
agendamentos {
  id: UUID
  empresa_id: UUID (FK)
  cliente_id: UUID (FK) -- Refer√™ncia ao cliente
  equipe_id: UUID (FK)  -- Refer√™ncia √† equipe
  nome_cliente: VARCHAR
  telefone: VARCHAR
  nome_carro: VARCHAR
  servico: VARCHAR
  data_agendamento: DATE
  horario: TIME
  status: VARCHAR
  observacoes: TEXT
}
```

## Pr√≥ximos Passos

### Backend Integration (Preparado)
1. ‚úÖ Tabelas criadas no Supabase
2. ‚úÖ Pol√≠ticas RLS implementadas
3. üîÑ Conectar formul√°rios com Supabase
4. üîÑ Implementar real-time updates
5. üîÑ Configurar notifica√ß√µes Telegram

### Funcionalidades Avan√ßadas
1. üîÑ Sistema de templates de mensagem
2. üîÑ Integra√ß√£o WhatsApp Business API
3. üîÑ Relat√≥rios PDF export√°veis
4. üîÑ Sistema de backup autom√°tico
5. üîÑ Dashboard executivo com KPIs

## Credenciais de Teste

### Admin
- **URL**: `/login`
- **Email**: `admin@agendicar.com`
- **Senha**: `admin123`

### Cliente Demo
- **URL**: `/cliente/login`
- **Email**: `demonstracao`
- **Senha**: `demo1234`

## Status de Implementa√ß√£o

### ‚úÖ Funcionalidades Completas
- [x] Estrutura de banco de dados
- [x] Layout responsivo com sidebar
- [x] P√°gina de configura√ß√µes (/cliente/conta)
- [x] Gest√£o completa de agendamentos
- [x] Gest√£o completa de clientes
- [x] Integra√ß√£o hor√°rios x agenda
- [x] Sistema multi-equipes
- [x] Formul√°rios funcionais
- [x] P√°gina inicial profissional

### üîÑ Em Desenvolvimento
- [ ] Integra√ß√£o com Supabase (dados reais)
- [ ] Upload de logo da empresa
- [ ] Notifica√ß√µes Telegram
- [ ] Valida√ß√£o avan√ßada de hor√°rios

### üìã Backlog
- [ ] Relat√≥rios PDF
- [ ] WhatsApp integration
- [ ] API p√∫blica
- [ ] Mobile app

## Suporte T√©cnico

Para implementa√ß√£o e d√∫vidas:
- Documenta√ß√£o do Supabase: https://supabase.com/docs
- Tailwind CSS: https://tailwindcss.com/docs
- React Router: https://reactrouter.com/docs
- shadcn/ui: https://ui.shadcn.com/docs

---

**Nota**: O sistema est√° pronto para integra√ß√£o com Supabase. Todas as funcionalidades est√£o implementadas com dados mockados e podem ser facilmente conectadas ao backend.
